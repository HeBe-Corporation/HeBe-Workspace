# 위생허가 Notion Worksheet 설계

> 심플하면서 모든 프로세스가 한눈에 보이는 구조

---

## 1. 통합 DB 구조 (1개 DB로 관리)

### DB명: `Permit Tracker`

기존 Permits + Renewal Tasks를 **하나로 통합**하여 관리 단순화

---

## 2. 필드 구성 (16개 - 핵심만)

| 필드명 | 타입 | 옵션/설명 |
|--------|------|-----------|
| **허가명** | Title | 예: 서울본점 영업신고증 |
| **국가** | Select | `KR` `KH` `VN` |
| **사업장** | Select | 본점/지점/공장 등 |
| **허가유형** | Select | `영업신고` `식품제조` `수입허가` `위생인증` `기타` |
| **발급기관** | Text | 예: 강남구청, MOH, FDA |
| **허가번호** | Text | 공식 허가 번호 |
| **상태** | Select | `준비중` `서류수집` `제출완료` `보완요청` `승인` `만료` |
| **리스크** | Select | `🔴High` `🟡Medium` `🟢Low` |
| **발급일** | Date | |
| **만료일** | Date | |
| **D-Day** | Formula | `만료일 - today()` |
| **담당자** | Person | |
| **서류체크** | Checkbox (Multi) | 아래 체크리스트 참조 |
| **증빙폴더** | URL | Google Drive 링크 |
| **비고** | Text | 보완요청 내용, 특이사항 |
| **갱신알림** | Formula | D-Day 기준 자동 표시 |

---

## 3. 상태 플로우 (6단계)

```
준비중 → 서류수집 → 제출완료 → 보완요청 → 승인 → 만료
                         ↑__________|
                        (반복 가능)
```

| 상태 | 색상 | 설명 |
|------|------|------|
| 준비중 | Gray | 신규 등록, 아직 미착수 |
| 서류수집 | Blue | 서류 준비 중 |
| 제출완료 | Purple | 기관에 제출함 |
| 보완요청 | Orange | 추가 서류/수정 필요 |
| 승인 | Green | 허가 발급 완료 |
| 만료 | Red | 갱신 필요 |

---

## 4. 서류 체크리스트 (Checkbox)

Notion 페이지 내 체크리스트로 관리:

```markdown
## 📋 필수 서류
- [ ] 사업자등록증 사본
- [ ] 임대차계약서
- [ ] 시설도면/배치도
- [ ] 장비리스트

## 📋 해당 시 추가
- [ ] 위생교육 이수증
- [ ] 제품 성분표/라벨
- [ ] 시험성적서
- [ ] 수수료 납부 영수증

## 📋 결과물
- [ ] 허가증 스캔본
- [ ] 결과 통지서
```

---

## 5. D-Day 알림 Formula

### D-Day 계산
```
dateBetween(prop("만료일"), now(), "days")
```

### 갱신알림 (자동 라벨)
```
if(
  prop("D-Day") <= 7, "🚨 D-7 긴급",
  if(
    prop("D-Day") <= 14, "⚠️ D-14 경고",
    if(
      prop("D-Day") <= 30, "📢 D-30 제출",
      if(
        prop("D-Day") <= 60, "📝 D-60 서류",
        if(
          prop("D-Day") <= 90, "🔔 D-90 준비",
          "✅ 여유"
        )
      )
    )
  )
)
```

---

## 6. 뷰 구성 (4개)

### View 1: 📊 대시보드 (Table)
- 전체 허가 목록
- 정렬: D-Day 오름차순
- 필터: 상태 ≠ 만료 (또는 전체)

### View 2: 🚨 긴급 (Gallery)
- 필터: D-Day ≤ 30
- 그룹: 국가별
- 빨간색 강조

### View 3: 🗂 국가별 (Board)
- 그룹 기준: 국가 (KR/KH/VN)
- 카드에 표시: 허가명, 상태, D-Day

### View 4: 📈 상태별 (Board)
- 그룹 기준: 상태
- Kanban 스타일로 진행 현황 파악

---

## 7. 실제 Notion 설정 가이드

### Step 1: DB 생성
1. Notion 페이지에서 `/database` → Full page database
2. 이름: `Permit Tracker`

### Step 2: 속성 추가
위 필드 구성표대로 속성 추가

### Step 3: 뷰 추가
1. `+ Add a view` 클릭
2. 뷰 4개 순서대로 생성

### Step 4: 템플릿 생성
1. `New` 버튼 옆 ▼ 클릭
2. `+ New template`
3. 서류 체크리스트 미리 넣어두기

---

## 8. 샘플 데이터

| 허가명 | 국가 | 사업장 | 허가유형 | 상태 | 만료일 | D-Day | 갱신알림 |
|--------|------|--------|----------|------|--------|-------|----------|
| 서울본점 영업신고증 | KR | 본점 | 영업신고 | 승인 | 2025-03-15 | 76 | 🔔 D-90 준비 |
| 프놈펜 MOH 위생허가 | KH | 지점 | 위생인증 | 서류수집 | 2025-02-01 | 34 | 📢 D-30 제출 |
| 호치민 식품안전인증 | VN | 공장 | 식품안전 | 보완요청 | 2025-01-20 | 22 | ⚠️ D-14 경고 |
| 부산지점 영업신고증 | KR | 지점 | 영업신고 | 준비중 | 2025-06-30 | 183 | ✅ 여유 |

---

## 9. 운영 루틴

### Daily
- 긴급 뷰 확인 (D-30 이하)

### Weekly
- 전체 대시보드 리뷰
- 상태 업데이트

### Monthly
- D-90 도래 허가 갱신 시작
- 완료된 허가 정리

---

## 10. Google Drive 연동

### 폴더 구조
```
Compliance/
├── KR/
│   ├── 서울본점/
│   │   ├── 영업신고증/
│   │   │   ├── 2024/
│   │   │   └── 2025/
│   └── 부산지점/
├── KH/
│   └── 프놈펜/
└── VN/
    └── 호치민/
```

### Notion 연결
- 각 허가 레코드의 `증빙폴더` 필드에 해당 Drive 폴더 URL 입력

---

*이 설계로 Notion에 바로 구축 가능. 궁금한 점 있으면 물어봐!*
